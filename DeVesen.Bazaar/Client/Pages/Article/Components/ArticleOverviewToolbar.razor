@using DeVesen.Bazaar.Client.Models
@using DeVesen.Bazaar.Client.Components.Common.TextField
@using DeVesen.Bazaar.Client.Pages.Vendor.Components

<MudGrid Spacing="2">
        
    <MudItem xs="12" md="9" lg="8" xl="6">
            
        <MudGrid Spacing="2">
            
            <MudItem xs="12">
                @if (ShowVendorSelection)
                {
                    <VendorSelector Item="Vendor"
                                    ItemChanged="@VendorChanged"
                                    Disabled="@DisableVendorSelection"
                                    DisableNewItem="@DisableNewItem" />
                }
                else
                {
                    <MudText Typo="Typo.h3">@Vendor?.GetTotalName()</MudText>
                }
            </MudItem>

            <MudItem xs="3">
                <DvTextField T="string"
                             Label="Nummer"
                             DebounceInterval="500"
                             Value="@Number"
                             ValueChanged="@NumberChanged" />
            </MudItem>

            <MudItem xs="9">
                <DvTextField T="string"
                             Label="Freitextsuche"
                             DebounceInterval="500"
                             Value="@SearchText"
                             ValueChanged="@SearchTextChanged" />
            </MudItem>

        </MudGrid>

    </MudItem>
    
    <MudItem xs="12" md="3" lg="4" xl="6"
             Class="d-flex justify-end gap-3 m-10 p-10">
        @ChildContent
    </MudItem>
        
</MudGrid>

@code {
    [Parameter]
    public Vendor? Vendor { get; set; }

    [Parameter]
    public string? Number { get; set; }

    [Parameter]
    public string? SearchText { get; set; }

    [Parameter]
    public bool DisableVendorSelection { get; set; }

    [Parameter]
    public bool ShowVendorSelection { get; set; } = true;

    [Parameter]
    public bool DisableNewItem { get; set; }

    [Parameter]
    public EventCallback<Vendor?> VendorChanged { get; set; }

    [Parameter]
    public EventCallback<string?> NumberChanged { get; set; }

    [Parameter]
    public EventCallback<string?> SearchTextChanged { get; set; }

    [Parameter]
    public RenderFragment? ChildContent { get; set; }
}
