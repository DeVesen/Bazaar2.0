@page "/vendors/{vendorId}/settlement"

@using DeVesen.Bazaar.Client.State.Settlement
@using DeVesen.Bazaar.Client.State.Title
@using Fluxor

@inherits Fluxor.Blazor.Web.Components.FluxorComponent

@inject TitleFacade TitleFacade
@inject SettlementFacade SettlementFacade
@inject IState<SettlementState> SettlementState

@if (SettlementState.Value.IsLoaded)
{
    <MudGrid>

        <MudItem>
            @* Artikelliste *@
        </MudItem>

        <MudItem>
            @* Kostenaufstellung *@
        </MudItem>

        <MudItem>
            @* Aktionen *@
        </MudItem>

    </MudGrid>
}
else
{
    <MudProgressCircular Color="Color.Default" Indeterminate="true" />
}

@code {

    [Parameter]
    public string VendorId { get; set; } = string.Empty;

    protected override async Task OnInitializedAsync()
    {
        await base.OnInitializedAsync();

        SettlementFacade.Fetch(VendorId);

        SetPageCaption();
    }

    private void SetPageCaption()
    {
        var caption = "Rückgabe / Abrechnung";

        TitleFacade.SetCaption(caption);
    }
}
